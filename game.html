<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Attrape les cadeaux üéÅ</title>
<style>
    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: #0a3d0a; /* vert No√´l */
        font-family: "Segoe UI Emoji", "Segoe UI", sans-serif;
    }
    #scoreboard {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 24px;
        color: #ffd700;
        text-shadow: 0 0 8px #ff0000;
    }
    canvas {
        display: block;
        margin: 0 auto;
        background: #003300;
        border: 4px solid #ffd700;
    }
</style>
</head>
<body>

<div id="scoreboard">Score : 0</div>
<canvas id="gameCanvas" width="600" height="400"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const canvasWidth = canvas.width;
const canvasHeight = canvas.height;

let score = 0;
let lives = 3;
let gameOver = false;

// --- SAC DU JOUEUR üéí
const player = {
    x: canvasWidth/2 - 25,
    y: canvasHeight - 50,
    width: 50,
    height: 50,
    speed: 7,
    emoji: "üéí"
};

// --- CADEAUX üéÅ
const gifts = [];
const giftSize = 40;
let giftSpeed = 3;

// --- CONTROLES ---
let keys = {};
document.addEventListener("keydown", (e)=>{ keys[e.key] = true; });
document.addEventListener("keyup", (e)=>{ keys[e.key] = false; });

// --- GENERER UN CADEAU ---
function spawnGift() {
    let x = Math.random() * (canvasWidth - giftSize);
    gifts.push({x:x, y:-giftSize, emoji:"üéÅ"});
}

// --- DESSIN ---
function draw() {
    ctx.fillStyle = "#003300";
    ctx.fillRect(0,0,canvasWidth,canvasHeight);

    // Sac joueur
    ctx.font = player.height + "px Segoe UI Emoji";
    ctx.fillText(player.emoji, player.x, player.y + player.height);

    // Cadeaux
    ctx.font = giftSize + "px Segoe UI Emoji";
    gifts.forEach(gift => ctx.fillText(gift.emoji, gift.x, gift.y));
}

// --- UPDATE ---
function update() {
    if(gameOver) return;

    // Mouvement du sac
    if(keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
    if(keys["ArrowRight"] && player.x + player.width < canvasWidth) player.x += player.speed;

    // Cadeaux
    gifts.forEach(gift => gift.y += giftSpeed);

    // Collision et score
    for(let i = gifts.length -1; i >=0; i--){
        let g = gifts[i];
        if(player.x < g.x + giftSize &&
           player.x + player.width > g.x &&
           player.y < g.y + giftSize &&
           player.y + player.height > g.y){
            score++;
            gifts.splice(i,1);
            document.getElementById("scoreboard").textContent = "Score : " + score;
        } else if(g.y > canvasHeight){
            lives--;
            gifts.splice(i,1);
            if(lives <=0){
                gameOver = true;
                document.getElementById("scoreboard").textContent = "üíÄ Game Over ! Score final : " + score;
            }
        }
    }
}

// --- GAME LOOP ---
let spawnCounter = 0;
function gameLoop(){
    if(!gameOver){
        draw();
        update();
        spawnCounter++;
        if(spawnCounter > 40){
            spawnGift();
            spawnCounter = 0;
        }
        requestAnimationFrame(gameLoop);
    }
}

gameLoop();
</script>

</body>
</html>
